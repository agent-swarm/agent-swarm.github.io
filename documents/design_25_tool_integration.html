<!DOCTYPE html><html class="default" lang="en" data-base=".."><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>design/25_tool_integration | agent-swarm-kit</title><meta name="description" content="Documentation for agent-swarm-kit"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script defer src="../assets/main.js"></script><script async src="../assets/icons.js" id="tsd-icons-script"></script><script async src="../assets/search.js" id="tsd-search-script"></script><script async src="../assets/navigation.js" id="tsd-nav-script"></script><script async src="../assets/hierarchy.js" id="tsd-hierarchy-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search"><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="../index.html" class="title">agent-swarm-kit</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><ul class="tsd-breadcrumb"><li><a href="../modules.html">agent-swarm-kit</a></li><li><a href="design_25_tool_integration.html">design/25_tool_integration</a></li></ul></div><div class="tsd-panel tsd-typography"><a id="tool-integration" class="tsd-anchor"></a><h1 class="tsd-anchor-link">Tool Integration<a href="#tool-integration" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h1><p>This document covers how to create, register, and integrate tools within the agent-swarm-kit framework. Tools are external functions that agents can invoke to perform specific actions, from simple computations to complex navigation between agents. For information about agent lifecycle and execution patterns, see <a href="design_05_session_management.html">Building Multi-Agent Systems</a>. For state management during tool execution, see <a href="design_05_session_management.html">Managing State and Storage</a>.</p>
<a id="tool-architecture-overview" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Tool Architecture Overview<a href="#tool-architecture-overview" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Tools in the agent swarm system follow a structured pattern where they are registered globally, validated before execution, and integrated with agents through schema definitions. The system supports both simple functional tools and complex navigation tools that orchestrate agent transitions.</p>
<p><img src="../media/25_Tool_Integration_0.svg" alt="Mermaid Diagram"></p>
<a id="basic-tool-structure" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Basic Tool Structure<a href="#basic-tool-structure" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>All tools follow a standardized interface that includes identification, execution logic, validation, and OpenAI-compatible function schemas for LLM integration.</p>
<a id="core-tool-properties" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Core Tool Properties<a href="#core-tool-properties" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><table>
<thead>
<tr>
<th>Property</th>
<th>Type</th>
<th>Description</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>toolName</code></td>
<td><code>ToolName</code></td>
<td>Unique identifier for the tool</td>
</tr>
<tr>
<td><code>call</code></td>
<td><code>async function</code></td>
<td>Main execution function</td>
</tr>
<tr>
<td><code>validate</code></td>
<td><code>async function</code></td>
<td>Pre-execution validation</td>
</tr>
<tr>
<td><code>type</code></td>
<td><code>&quot;function&quot;</code></td>
<td>Tool type specification</td>
</tr>
<tr>
<td><code>function</code></td>
<td><code>object</code></td>
<td>OpenAI function schema</td>
</tr>
</tbody>
</table>
<a id="tool-registration-pattern" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Tool Registration Pattern<a href="#tool-registration-pattern" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-6">EXAMPLE_TOOL</span><span class="hl-1"> = </span><span class="hl-0">addTool</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-2">toolName:</span><span class="hl-1"> </span><span class="hl-3">&quot;example-tool&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">call</span><span class="hl-2">:</span><span class="hl-1"> </span><span class="hl-4">async</span><span class="hl-1"> ({ </span><span class="hl-2">toolId</span><span class="hl-1">, </span><span class="hl-2">clientId</span><span class="hl-1">, </span><span class="hl-2">agentName</span><span class="hl-1">, </span><span class="hl-2">params</span><span class="hl-1"> }) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-9">// Tool execution logic</span><br/><span class="hl-1">    </span><span class="hl-5">await</span><span class="hl-1"> </span><span class="hl-0">commitToolOutput</span><span class="hl-1">(</span><span class="hl-2">toolId</span><span class="hl-1">, </span><span class="hl-3">&quot;Tool executed successfully&quot;</span><span class="hl-1">, </span><span class="hl-2">clientId</span><span class="hl-1">, </span><span class="hl-2">agentName</span><span class="hl-1">);</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-0">validate</span><span class="hl-2">:</span><span class="hl-1"> </span><span class="hl-4">async</span><span class="hl-1"> ({ </span><span class="hl-2">clientId</span><span class="hl-1">, </span><span class="hl-2">agentName</span><span class="hl-1">, </span><span class="hl-2">params</span><span class="hl-1"> }) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-9">// Validation logic</span><br/><span class="hl-1">    </span><span class="hl-5">return</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">;</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;function&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-2">function:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-2">name:</span><span class="hl-1"> </span><span class="hl-3">&quot;example-tool&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&quot;Example tool for demonstration&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-2">parameters:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;object&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-2">properties:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-2">input:</span><span class="hl-1"> {</span><br/><span class="hl-1">          </span><span class="hl-2">type:</span><span class="hl-1"> </span><span class="hl-3">&quot;string&quot;</span><span class="hl-1">, </span><br/><span class="hl-1">          </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&quot;Input parameter&quot;</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">      </span><span class="hl-2">required:</span><span class="hl-1"> [</span><span class="hl-3">&quot;input&quot;</span><span class="hl-1">]</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">})</span>
</code><button type="button">Copy</button></pre>

<a id="tool-execution-lifecycle" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Tool Execution Lifecycle<a href="#tool-execution-lifecycle" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The tool execution process involves validation, execution, and output handling within the context of agent conversations and LLM completions.</p>
<p><img src="../media/25_Tool_Integration_1.svg" alt="Mermaid Diagram"></p>
<a id="navigation-tools" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Navigation Tools<a href="#navigation-tools" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Navigation tools are specialized tools that manage transitions between agents within a swarm. The system provides templates for creating both agent-specific navigation and triage navigation patterns.</p>
<a id="agent-to-agent-navigation" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Agent-to-Agent Navigation<a href="#agent-to-agent-navigation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The <code>createNavigateToAgent</code> template creates tools that navigate from any agent to a specific target agent:</p>
<pre><code class="typescript"><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-6">navigateToSales</span><span class="hl-1"> = </span><span class="hl-0">createNavigateToAgent</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-0">toolOutput</span><span class="hl-2">:</span><span class="hl-1"> (</span><span class="hl-2">clientId</span><span class="hl-1">, </span><span class="hl-2">lastAgent</span><span class="hl-1">, </span><span class="hl-2">agentName</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><br/><span class="hl-1">    </span><span class="hl-3">`Successfully navigated from </span><span class="hl-4">${</span><span class="hl-2">lastAgent</span><span class="hl-4">}</span><span class="hl-3"> to </span><span class="hl-4">${</span><span class="hl-2">agentName</span><span class="hl-4">}</span><span class="hl-3">`</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">executeMessage</span><span class="hl-2">:</span><span class="hl-1"> (</span><span class="hl-2">clientId</span><span class="hl-1">, </span><span class="hl-2">lastMessage</span><span class="hl-1">, </span><span class="hl-2">lastAgent</span><span class="hl-1">, </span><span class="hl-2">agentName</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><br/><span class="hl-1">    </span><span class="hl-3">`Processing </span><span class="hl-4">${</span><span class="hl-2">lastMessage</span><span class="hl-4">}</span><span class="hl-3"> for </span><span class="hl-4">${</span><span class="hl-2">clientId</span><span class="hl-4">}</span><span class="hl-3"> on </span><span class="hl-4">${</span><span class="hl-2">agentName</span><span class="hl-4">}</span><span class="hl-3">`</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">beforeNavigate</span><span class="hl-2">:</span><span class="hl-1"> </span><span class="hl-4">async</span><span class="hl-1"> (</span><span class="hl-2">clientId</span><span class="hl-1">, </span><span class="hl-2">lastMessage</span><span class="hl-1">, </span><span class="hl-2">lastAgent</span><span class="hl-1">, </span><span class="hl-2">agentName</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-9">// Pre-navigation logic</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<a id="triage-navigation-pattern" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Triage Navigation Pattern<a href="#triage-navigation-pattern" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The <code>createNavigateToTriageAgent</code> template handles navigation back to the default/triage agent:</p>
<pre><code class="typescript"><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-6">navigateToTriage</span><span class="hl-1"> = </span><span class="hl-0">createNavigateToTriageAgent</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-0">toolOutputAccept</span><span class="hl-2">:</span><span class="hl-1"> (</span><span class="hl-2">clientId</span><span class="hl-1">, </span><span class="hl-2">defaultAgent</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><br/><span class="hl-1">    </span><span class="hl-3">`Successfully navigated to </span><span class="hl-4">${</span><span class="hl-2">defaultAgent</span><span class="hl-4">}</span><span class="hl-3">`</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">toolOutputReject</span><span class="hl-2">:</span><span class="hl-1"> (</span><span class="hl-2">clientId</span><span class="hl-1">, </span><span class="hl-2">defaultAgent</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><br/><span class="hl-1">    </span><span class="hl-3">`Already on </span><span class="hl-4">${</span><span class="hl-2">defaultAgent</span><span class="hl-4">}</span><span class="hl-3">. No navigation needed`</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">executeMessage</span><span class="hl-2">:</span><span class="hl-1"> (</span><span class="hl-2">clientId</span><span class="hl-1">, </span><span class="hl-2">defaultAgent</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><br/><span class="hl-1">    </span><span class="hl-3">`Continue conversation based on the last message`</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<a id="tool-templates-and-aliases" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Tool Templates and Aliases<a href="#tool-templates-and-aliases" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The framework provides high-level aliases that combine tool creation with navigation logic, simplifying the process of adding navigation capabilities to agents.</p>
<a id="agent-navigation-alias" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Agent Navigation Alias<a href="#agent-navigation-alias" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-6">SALES_NAVIGATION_TOOL</span><span class="hl-1"> = </span><span class="hl-0">addAgentNavigation</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-2">toolName:</span><span class="hl-1"> </span><span class="hl-3">&quot;navigate-to-sales&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&quot;Navigate to the sales agent for sales-related queries&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-2">navigateTo:</span><span class="hl-1"> </span><span class="hl-3">&quot;sales-agent&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-2">toolOutput:</span><span class="hl-1"> </span><span class="hl-3">&quot;Navigated to sales department&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-2">executeMessage:</span><span class="hl-1"> </span><span class="hl-3">&quot;Hello! I&#39;m here to help with your sales inquiry.&quot;</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<a id="triage-navigation-alias" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Triage Navigation Alias<a href="#triage-navigation-alias" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="typescript"><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-6">TRIAGE_NAVIGATION_TOOL</span><span class="hl-1"> = </span><span class="hl-0">addTriageNavigation</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-2">toolName:</span><span class="hl-1"> </span><span class="hl-3">&quot;navigate-to-triage&quot;</span><span class="hl-1">, </span><br/><span class="hl-1">  </span><span class="hl-2">description:</span><span class="hl-1"> </span><span class="hl-3">&quot;Navigate back to triage for topic change&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-2">flushMessage:</span><span class="hl-1"> </span><span class="hl-3">&quot;Let me redirect you to our main assistant&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-2">toolOutputAccept:</span><span class="hl-1"> </span><span class="hl-3">&quot;Redirected to main assistant&quot;</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<a id="navigation-registration-flow" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Navigation Registration Flow<a href="#navigation-registration-flow" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p><img src="../media/25_Tool_Integration_2.svg" alt="Mermaid Diagram"></p>
<a id="tool-validation-and-error-handling" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Tool Validation and Error Handling<a href="#tool-validation-and-error-handling" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The validation system ensures tools can execute safely within the current session context before actual execution occurs.</p>
<a id="validation-patterns" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Validation Patterns<a href="#validation-patterns" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Tools implement validation through the <code>validate</code> function that receives session context:</p>
<pre><code class="typescript"><span class="hl-11">validate</span><span class="hl-1">: </span><span class="hl-4">async</span><span class="hl-1"> ({ </span><span class="hl-2">clientId</span><span class="hl-1">, </span><span class="hl-2">agentName</span><span class="hl-1">, </span><span class="hl-2">params</span><span class="hl-1"> }) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-9">// Check session state</span><br/><span class="hl-1">  </span><span class="hl-4">const</span><span class="hl-1"> </span><span class="hl-6">currentAgent</span><span class="hl-1"> = </span><span class="hl-5">await</span><span class="hl-1"> </span><span class="hl-0">getAgentName</span><span class="hl-1">(</span><span class="hl-2">clientId</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-5">if</span><span class="hl-1"> (</span><span class="hl-2">currentAgent</span><span class="hl-1"> !== </span><span class="hl-2">agentName</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-5">return</span><span class="hl-1"> </span><span class="hl-4">false</span><span class="hl-1">; </span><span class="hl-9">// Tool called on inactive agent</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">  </span><br/><span class="hl-1">  </span><span class="hl-9">// Validate parameters</span><br/><span class="hl-1">  </span><span class="hl-5">if</span><span class="hl-1"> (!</span><span class="hl-2">params</span><span class="hl-1">.</span><span class="hl-2">requiredField</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-5">return</span><span class="hl-1"> </span><span class="hl-4">false</span><span class="hl-1">;</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">  </span><br/><span class="hl-1">  </span><span class="hl-5">return</span><span class="hl-1"> </span><span class="hl-4">true</span><span class="hl-1">;</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<a id="error-recovery-strategies" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Error Recovery Strategies<a href="#error-recovery-strategies" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The system includes rescue mechanisms for tool execution failures:</p>
<table>
<thead>
<tr>
<th>Strategy</th>
<th>Trigger</th>
<th>Behavior</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>flush</code></td>
<td>Tool validation fails</td>
<td>Clear conversation and emit placeholder</td>
</tr>
<tr>
<td><code>flush</code></td>
<td>Tool not found</td>
<td>Clear conversation and retry</td>
</tr>
<tr>
<td><code>flush</code></td>
<td>Empty tool output</td>
<td>Clear conversation and emit rescue message</td>
</tr>
</tbody>
</table>
<a id="integration-with-agent-completions" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Integration with Agent Completions<a href="#integration-with-agent-completions" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Tools integrate with agents through the completion system, where LLMs generate <code>tool_calls</code> arrays that trigger tool execution.</p>
<a id="completion-tool-integration-flow" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Completion-Tool Integration Flow<a href="#completion-tool-integration-flow" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p><img src="../media/25_Tool_Integration_3.svg" alt="Mermaid Diagram"></p>
<a id="tool-call-structure-in-completions" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Tool Call Structure in Completions<a href="#tool-call-structure-in-completions" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>LLM responses containing tool calls follow this structure:</p>
<pre><code class="json"><span class="hl-1">{</span><br/><span class="hl-1">  </span><span class="hl-12">&quot;role&quot;</span><span class="hl-1">: </span><span class="hl-3">&quot;assistant&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-12">&quot;content&quot;</span><span class="hl-1">: </span><span class="hl-3">&quot;&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-12">&quot;tool_calls&quot;</span><span class="hl-1">: [</span><br/><span class="hl-1">    {</span><br/><span class="hl-1">      </span><span class="hl-12">&quot;function&quot;</span><span class="hl-1">: {</span><br/><span class="hl-1">        </span><span class="hl-12">&quot;name&quot;</span><span class="hl-1">: </span><span class="hl-3">&quot;navigate-to-sales&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-12">&quot;arguments&quot;</span><span class="hl-1">: {</span><br/><span class="hl-1">          </span><span class="hl-12">&quot;query&quot;</span><span class="hl-1">: </span><span class="hl-3">&quot;pricing information&quot;</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">      }</span><br/><span class="hl-1">    }</span><br/><span class="hl-1">  ]</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<a id="advanced-tool-patterns" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Advanced Tool Patterns<a href="#advanced-tool-patterns" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="parallel-tool-execution-prevention" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Parallel Tool Execution Prevention<a href="#parallel-tool-execution-prevention" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The system includes safeguards against multiple tool calls within navigation execution:</p>
<pre><code class="typescript"><span class="hl-11">call</span><span class="hl-1">: </span><span class="hl-4">async</span><span class="hl-1"> ({ </span><span class="hl-2">toolId</span><span class="hl-1">, </span><span class="hl-2">clientId</span><span class="hl-1">, </span><span class="hl-2">toolCalls</span><span class="hl-1"> }) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-5">if</span><span class="hl-1"> (</span><span class="hl-2">toolCalls</span><span class="hl-1">.</span><span class="hl-2">length</span><span class="hl-1"> &gt; </span><span class="hl-8">1</span><span class="hl-1">) {</span><br/><span class="hl-1">    </span><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-0">error</span><span class="hl-1">(</span><span class="hl-3">&quot;agent-swarm addAgentNavigation model called multiple tools within navigation execution&quot;</span><span class="hl-1">);</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">  </span><span class="hl-5">await</span><span class="hl-1"> </span><span class="hl-0">navigate</span><span class="hl-1">(</span><span class="hl-2">toolId</span><span class="hl-1">, </span><span class="hl-2">clientId</span><span class="hl-1">, </span><span class="hl-2">navigateTo</span><span class="hl-1">);</span><br/><span class="hl-1">}</span>
</code><button type="button">Copy</button></pre>

<a id="context-isolation-with-begincontext" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Context Isolation with beginContext<a href="#context-isolation-with-begincontext" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Tool templates use <code>beginContext()</code> to ensure clean execution scope:</p>
<pre><code class="typescript"><span class="hl-5">return</span><span class="hl-1"> </span><span class="hl-0">beginContext</span><span class="hl-1">(</span><span class="hl-4">async</span><span class="hl-1"> (</span><span class="hl-2">toolId</span><span class="hl-1">: </span><span class="hl-7">string</span><span class="hl-1">, </span><span class="hl-2">clientId</span><span class="hl-1">: </span><span class="hl-7">string</span><span class="hl-1">, </span><span class="hl-2">agentName</span><span class="hl-1">: </span><span class="hl-7">AgentName</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-9">// Tool execution in isolated context</span><br/><span class="hl-1">  </span><span class="hl-5">await</span><span class="hl-1"> </span><span class="hl-0">commitStopToolsForce</span><span class="hl-1">(</span><span class="hl-2">clientId</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-5">await</span><span class="hl-1"> </span><span class="hl-0">changeToAgent</span><span class="hl-1">(</span><span class="hl-2">agentName</span><span class="hl-1">, </span><span class="hl-2">clientId</span><span class="hl-1">);</span><br/><span class="hl-1">  </span><span class="hl-5">await</span><span class="hl-1"> </span><span class="hl-0">executeForce</span><span class="hl-1">(</span><span class="hl-2">message</span><span class="hl-1">, </span><span class="hl-2">clientId</span><span class="hl-1">);</span><br/><span class="hl-1">});</span>
</code><button type="button">Copy</button></pre>

<a id="session-state-management-during-tool-execution" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Session State Management During Tool Execution<a href="#session-state-management-during-tool-execution" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Tools interact with session state through specialized commit functions:</p>
<table>
<thead>
<tr>
<th>Function</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>commitToolOutput()</code></td>
<td>Commit tool result to conversation</td>
</tr>
<tr>
<td><code>commitStopToolsForce()</code></td>
<td>Stop pending tool executions</td>
</tr>
<tr>
<td><code>commitFlushForce()</code></td>
<td>Clear conversation history</td>
</tr>
<tr>
<td><code>execute()</code></td>
<td>Continue agent conversation</td>
</tr>
<tr>
<td><code>emitForce()</code></td>
<td>Send message without history</td>
</tr>
</tbody>
</table>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#tool-integration"><span>Tool <wbr/>Integration</span></a><ul><li><a href="#tool-architecture-overview"><span>Tool <wbr/>Architecture <wbr/>Overview</span></a></li><li><a href="#basic-tool-structure"><span>Basic <wbr/>Tool <wbr/>Structure</span></a></li><li><ul><li><a href="#core-tool-properties"><span>Core <wbr/>Tool <wbr/>Properties</span></a></li><li><a href="#tool-registration-pattern"><span>Tool <wbr/>Registration <wbr/>Pattern</span></a></li></ul></li><li><a href="#tool-execution-lifecycle"><span>Tool <wbr/>Execution <wbr/>Lifecycle</span></a></li><li><a href="#navigation-tools"><span>Navigation <wbr/>Tools</span></a></li><li><ul><li><a href="#agent-to-agent-navigation"><span>Agent-<wbr/>to-<wbr/>Agent <wbr/>Navigation</span></a></li><li><a href="#triage-navigation-pattern"><span>Triage <wbr/>Navigation <wbr/>Pattern</span></a></li></ul></li><li><a href="#tool-templates-and-aliases"><span>Tool <wbr/>Templates and <wbr/>Aliases</span></a></li><li><ul><li><a href="#agent-navigation-alias"><span>Agent <wbr/>Navigation <wbr/>Alias</span></a></li><li><a href="#triage-navigation-alias"><span>Triage <wbr/>Navigation <wbr/>Alias</span></a></li><li><a href="#navigation-registration-flow"><span>Navigation <wbr/>Registration <wbr/>Flow</span></a></li></ul></li><li><a href="#tool-validation-and-error-handling"><span>Tool <wbr/>Validation and <wbr/>Error <wbr/>Handling</span></a></li><li><ul><li><a href="#validation-patterns"><span>Validation <wbr/>Patterns</span></a></li><li><a href="#error-recovery-strategies"><span>Error <wbr/>Recovery <wbr/>Strategies</span></a></li></ul></li><li><a href="#integration-with-agent-completions"><span>Integration with <wbr/>Agent <wbr/>Completions</span></a></li><li><ul><li><a href="#completion-tool-integration-flow"><span>Completion-<wbr/>Tool <wbr/>Integration <wbr/>Flow</span></a></li><li><a href="#tool-call-structure-in-completions"><span>Tool <wbr/>Call <wbr/>Structure in <wbr/>Completions</span></a></li></ul></li><li><a href="#advanced-tool-patterns"><span>Advanced <wbr/>Tool <wbr/>Patterns</span></a></li><li><ul><li><a href="#parallel-tool-execution-prevention"><span>Parallel <wbr/>Tool <wbr/>Execution <wbr/>Prevention</span></a></li><li><a href="#context-isolation-with-begincontext"><span>Context <wbr/>Isolation with begin<wbr/>Context</span></a></li><li><a href="#session-state-management-during-tool-execution"><span>Session <wbr/>State <wbr/>Management <wbr/>During <wbr/>Tool <wbr/>Execution</span></a></li></ul></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="../modules.html">agent-swarm-kit</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
   (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
   m[i].l=1*new Date();
   for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
   k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
   (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

   ym(100273846, "init", {
        clickmap:true,
        trackLinks:true,
        accurateTrackBounce:true,
        webvisor:true,
        ecommerce:"dataLayer"
   });
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/100273846" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
<!-- /Yandex.Metrika counter -->

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-85RYYZDT35"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-85RYYZDT35');
</script>
