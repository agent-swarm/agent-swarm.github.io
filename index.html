<!DOCTYPE html><html class="default" lang="en" data-base="."><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>agent-swarm-kit - v1.0.159</title><meta name="description" content="Documentation for agent-swarm-kit"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script defer src="assets/main.js"></script><script async src="assets/icons.js" id="tsd-icons-script"></script><script async src="assets/search.js" id="tsd-search-script"></script><script async src="assets/navigation.js" id="tsd-nav-script"></script><script async src="assets/hierarchy.js" id="tsd-hierarchy-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search"><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">agent-swarm-kit - v1.0.159</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><h1>agent-swarm-kit - v1.0.159</h1></div><div class="tsd-panel tsd-typography"><a id="üêù-agent-swarm-kit" class="tsd-anchor"></a><h1 class="tsd-anchor-link">üêù agent-swarm-kit<a href="#üêù-agent-swarm-kit" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h1><blockquote>
<p>A TypeScript library for building orchestrated framework-agnostic multi-agent AI systems. Documentation <a href="https://github.com/tripolskypetr/agent-swarm-kit/tree/master/docs">available in docs folder</a></p>
</blockquote>
<p><img src="media/schema.png" alt="schema"></p>
<a id="installation" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Installation<a href="#installation" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>In comparison with langchain js this library provide the lightweight API so you can delegate the prompt engineering to other junior developers. It support message scheduling so user can interrupt the ai agent with additional details in few messages</p>
<pre><code class="bash"><span class="hl-0">npm</span><span class="hl-1"> </span><span class="hl-2">install</span><span class="hl-1"> </span><span class="hl-2">agent-swarm-kit</span>
</code><button type="button">Copy</button></pre>

<a id="the-idea" class="tsd-anchor"></a><h2 class="tsd-anchor-link">The Idea<a href="#the-idea" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><ol>
<li>
<p>Several chatgpt sessions (agents) <a href="https://ollama.com/blog/tool-support">execute tool calls</a>. Each agent can use different model, for example, <a href="https://ollama.com/library/mistral">mistral 7b</a> for small talk, <a href="https://ollama.com/library/nemotron">nemotron</a> for business conversation</p>
</li>
<li>
<p>The agent swarm navigate messages to the active chatgpt session (agent) for each <code>WebSocket</code> channel <a href="src/routes/session.ts#L5">by using <code>clientId</code> url parameter</a></p>
</li>
<li>
<p>The active chatgpt session (agent) in the swarm could be changed <a href="https://platform.openai.com/docs/assistants/tools/function-calling">by executing function tool</a></p>
</li>
<li>
<p>Each client sessions <a href="https://platform.openai.com/docs/api-reference/messages/getMessage">share the same chat message history</a> for all agents. Each client chat history keep the last 25 messages with rotation. Only <code>assistant</code> and <code>user</code> messages are shared between chatgpt sessions (agents), the <code>system</code> and <code>tool</code> messages are agent-scoped so each agent knows only those tools related to It. As a result, each chatgpt session (agent) has it's <a href="https://platform.openai.com/docs/api-reference/messages/createMessage#messages-createmessage-role">unique system prompt</a></p>
</li>
<li>
<p>If the agent output do not pass the validation (not existing tool call, tool call with invalid arguments, empty output, XML tags in output or JSON in output by default), the resque algorithm will try to fix the model. At first it will hide the previos messeges from a model, if this will not help, it return a placeholder like <code>Sorry, I missed that. Could you say it again?</code></p>
</li>
</ol>
<a id="test-cases" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Test Cases<a href="#test-cases" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="validation-test-cases" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Validation Test Cases<a href="#validation-test-cases" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><ol>
<li>
<p><strong>Passes validation when all dependencies are provided</strong></p>
<ul>
<li>Tests if validation passes when all dependencies are present.</li>
</ul>
</li>
<li>
<p><strong>Fails validation when swarm is missing</strong></p>
<ul>
<li>Tests if validation fails when the swarm is missing.</li>
</ul>
</li>
<li>
<p><strong>Fails validation when completion is missing</strong></p>
<ul>
<li>Tests if validation fails when the completion is missing.</li>
</ul>
</li>
<li>
<p><strong>Fails validation when agent is missing</strong></p>
<ul>
<li>Tests if validation fails when the agent is missing.</li>
</ul>
</li>
<li>
<p><strong>Fails validation when tool is missing</strong></p>
<ul>
<li>Tests if validation fails when the tool is missing.</li>
</ul>
</li>
<li>
<p><strong>Fails validation when swarm's default agent is not in the list</strong></p>
<ul>
<li>Tests if validation fails when the swarm's default agent is not included in the list.</li>
</ul>
</li>
</ol>
<a id="model-recovery-test-cases" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Model Recovery Test Cases<a href="#model-recovery-test-cases" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><ol start="7">
<li>
<p><strong>Rescues model on non-existing tool call</strong></p>
<ul>
<li>Tests if the model can recover when a non-existing tool is called.</li>
</ul>
</li>
<li>
<p><strong>Rescues model on empty output</strong></p>
<ul>
<li>Tests if the model can recover when the output is empty.</li>
</ul>
</li>
<li>
<p><strong>Rescues model on failed tool validation</strong></p>
<ul>
<li>Tests if the model can recover when tool validation fails.</li>
</ul>
</li>
<li>
<p><strong>Failed rescue raises a placeholder</strong></p>
<ul>
<li>Tests if a placeholder is returned when the rescue algorithm fails.</li>
</ul>
</li>
</ol>
<a id="navigation-test-cases" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Navigation Test Cases<a href="#navigation-test-cases" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><ol start="11">
<li>
<p><strong>Navigates to sales agent on request</strong></p>
<ul>
<li>Tests if the system navigates to the sales agent upon request.</li>
</ul>
</li>
<li>
<p><strong>Navigates to refund agent on request</strong></p>
<ul>
<li>Tests if the system navigates to the refund agent upon request.</li>
</ul>
</li>
</ol>
<a id="deadlock-prevention-test-cases" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Deadlock Prevention Test Cases<a href="#deadlock-prevention-test-cases" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><ol start="13">
<li>
<p><strong>Avoids deadlock if commitToolOutput was not executed before navigation</strong></p>
<ul>
<li>Tests if the system avoids deadlock when commitToolOutput is not executed before navigation.</li>
</ul>
</li>
<li>
<p><strong>Avoids deadlock when commitToolOutput is executed in parallel with next completion</strong></p>
<ul>
<li>Tests if the system avoids deadlock when commitToolOutput is executed in parallel with the next completion.</li>
</ul>
</li>
</ol>
<a id="agent-execution-test-cases" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Agent Execution Test Cases<a href="#agent-execution-test-cases" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><ol start="15">
<li>
<p><strong>Ignores execution due to obsolete agent</strong></p>
<ul>
<li>Tests if the system ignores execution due to an obsolete agent.</li>
</ul>
</li>
<li>
<p><strong>Ignores commitToolOutput due to obsolete agent</strong></p>
<ul>
<li>Tests if the system ignores commitToolOutput due to an obsolete agent.</li>
</ul>
</li>
<li>
<p><strong>Ignores commitSystemMessage due to obsolete agent</strong></p>
<ul>
<li>Tests if the system ignores commitSystemMessage due to an obsolete agent.</li>
</ul>
</li>
</ol>
<a id="connection-disposal-test-cases" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Connection Disposal Test Cases<a href="#connection-disposal-test-cases" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><ol start="18">
<li>
<p><strong>Disposes connections for session function</strong></p>
<ul>
<li>Tests if the system disposes of connections for the session function.</li>
</ul>
</li>
<li>
<p><strong>Disposes connections for makeConnection function</strong></p>
<ul>
<li>Tests if the system disposes of connections for the makeConnection function.</li>
</ul>
</li>
<li>
<p><strong>Disposes connections for complete function</strong></p>
<ul>
<li>Tests if the system disposes of connections for the complete function.</li>
</ul>
</li>
</ol>
<a id="additional-system-behavior-test-cases" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Additional System Behavior Test Cases<a href="#additional-system-behavior-test-cases" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h3><ol start="21">
<li>
<p><strong>Uses different completions on multiple agents</strong></p>
<ul>
<li>Tests if the system uses different completions for multiple agents.</li>
</ul>
</li>
<li>
<p><strong>Clears history for similar clientId after each parallel complete call</strong></p>
<ul>
<li>Tests if the system clears history for similar clientId after each parallel complete call.</li>
</ul>
</li>
<li>
<p><strong>Orchestrates swarms for each connection</strong></p>
<ul>
<li>Tests if the system orchestrates swarms for each connection.</li>
</ul>
</li>
<li>
<p><strong>Queues user messages in connection</strong></p>
<ul>
<li>Tests if the system queues user messages in connection.</li>
</ul>
</li>
<li>
<p><strong>Allows server-side emit for makeConnection</strong></p>
<ul>
<li>Tests if the system allows server-side emit for makeConnection.</li>
</ul>
</li>
</ol>
<a id="code-sample" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Code sample<a href="#code-sample" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><pre><code class="tsx"><span class="hl-3">import</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-4">addAgent</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">addCompletion</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">addSwarm</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">addTool</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">changeAgent</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">execute</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">session</span><span class="hl-1">,</span><br/><span class="hl-1">} </span><span class="hl-3">from</span><span class="hl-1"> </span><span class="hl-2">&quot;agent-swarm-kit&quot;</span><span class="hl-1">;</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">NAVIGATE_TOOL</span><span class="hl-1"> = </span><span class="hl-0">addTool</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">toolName:</span><span class="hl-1"> </span><span class="hl-2">&quot;navigate-tool&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-0">call</span><span class="hl-4">:</span><span class="hl-1"> </span><span class="hl-5">async</span><span class="hl-1"> (</span><span class="hl-4">clientId</span><span class="hl-1">, </span><span class="hl-4">agentName</span><span class="hl-1">, { </span><span class="hl-4">to</span><span class="hl-1"> }) </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">changeAgent</span><span class="hl-1">(</span><span class="hl-4">to</span><span class="hl-1">, </span><span class="hl-4">clientId</span><span class="hl-1">);</span><br/><span class="hl-1">    </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">execute</span><span class="hl-1">(</span><span class="hl-2">&quot;Navigation complete. Notify the user&quot;</span><span class="hl-1">, </span><span class="hl-4">clientId</span><span class="hl-1">);</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">  </span><span class="hl-0">validate</span><span class="hl-4">:</span><span class="hl-1"> </span><span class="hl-5">async</span><span class="hl-1"> () </span><span class="hl-5">=&gt;</span><span class="hl-1"> </span><span class="hl-5">true</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-2">&quot;function&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">function:</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-4">name:</span><span class="hl-1"> </span><span class="hl-2">&quot;navigate-tool&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">description:</span><span class="hl-1"> </span><span class="hl-2">&quot;The tool for navigation&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-4">parameters:</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-2">&quot;object&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-4">properties:</span><span class="hl-1"> {</span><br/><span class="hl-1">        </span><span class="hl-4">to:</span><span class="hl-1"> {</span><br/><span class="hl-1">          </span><span class="hl-4">type:</span><span class="hl-1"> </span><span class="hl-2">&quot;string&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">          </span><span class="hl-4">description:</span><span class="hl-1"> </span><span class="hl-2">&quot;The target agent for navigation&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">        },</span><br/><span class="hl-1">      },</span><br/><span class="hl-1">      </span><span class="hl-4">required:</span><span class="hl-1"> [</span><span class="hl-2">&quot;to&quot;</span><span class="hl-1">],</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">ollama</span><span class="hl-1"> = </span><span class="hl-5">new</span><span class="hl-1"> </span><span class="hl-0">Ollama</span><span class="hl-1">({ </span><span class="hl-4">host:</span><span class="hl-1"> </span><span class="hl-6">CC_OLLAMA_HOST</span><span class="hl-1"> });</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">MOCK_COMPLETION</span><span class="hl-1"> = </span><span class="hl-0">addCompletion</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">completionName:</span><span class="hl-1"> </span><span class="hl-2">&quot;navigate-completion&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-7">/**</span><br/><span class="hl-7">   * Use whatever you want: NVIDIA NIM, OpenAI, GPT4All, Ollama or LM Studio</span><br/><span class="hl-7">   * Even mock it for unit test of tool integration like it done in `test` folder</span><br/><span class="hl-7">   * </span><br/><span class="hl-7">   * </span><span class="hl-5">@see</span><span class="hl-7"> </span><span class="hl-4">https://github.com/tripolskypetr/agent-swarm-kit/tree/master/test</span><br/><span class="hl-7">   */</span><br/><span class="hl-1">  </span><span class="hl-0">getCompletion</span><span class="hl-4">:</span><span class="hl-1"> </span><span class="hl-5">async</span><span class="hl-1"> ({ </span><span class="hl-4">messages</span><span class="hl-1">, </span><span class="hl-4">tools</span><span class="hl-1"> }) </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-3">return</span><span class="hl-1"> </span><span class="hl-4">ollama</span><span class="hl-1">.</span><span class="hl-0">chat</span><span class="hl-1">({</span><br/><span class="hl-1">      </span><span class="hl-4">model:</span><span class="hl-1"> </span><span class="hl-6">CC_OLLAMA_CHAT_MODEL</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-4">keep_alive:</span><span class="hl-1"> </span><span class="hl-2">&quot;1h&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-4">messages</span><span class="hl-1">,</span><br/><span class="hl-1">      </span><span class="hl-4">tools</span><span class="hl-1">,</span><br/><span class="hl-1">    })</span><br/><span class="hl-1">  },</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">TRIAGE_AGENT</span><span class="hl-1"> = </span><span class="hl-0">addAgent</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">agentName:</span><span class="hl-1"> </span><span class="hl-2">&quot;triage-agent&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">completion:</span><span class="hl-1"> </span><span class="hl-6">MOCK_COMPLETION</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">prompt:</span><span class="hl-1"> </span><span class="hl-2">&quot;You are to triage a users request, and call a tool to transfer to the right agent. There are two agents available: `sales-agent` and `refund-agent`&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">tools:</span><span class="hl-1"> [</span><span class="hl-6">NAVIGATE_TOOL</span><span class="hl-1">],</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">SALES_AGENT</span><span class="hl-1"> = </span><span class="hl-0">addAgent</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">agentName:</span><span class="hl-1"> </span><span class="hl-2">&quot;sales-agent&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">completion:</span><span class="hl-1"> </span><span class="hl-6">MOCK_COMPLETION</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">prompt:</span><span class="hl-1"> </span><span class="hl-2">&quot;You are a sales agent that handles all actions related to placing the order to purchase an item.&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">tools:</span><span class="hl-1"> [</span><span class="hl-6">NAVIGATE_TOOL</span><span class="hl-1">],</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">REDUND_AGENT</span><span class="hl-1"> = </span><span class="hl-0">addAgent</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">agentName:</span><span class="hl-1"> </span><span class="hl-2">&quot;refund-agent&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">completion:</span><span class="hl-1"> </span><span class="hl-6">MOCK_COMPLETION</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">prompt:</span><span class="hl-1"> </span><span class="hl-2">&quot;You are a refund agent that handles all actions related to refunds after a return has been processed.&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">tools:</span><span class="hl-1"> [</span><span class="hl-6">NAVIGATE_TOOL</span><span class="hl-1">],</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">TEST_SWARM</span><span class="hl-1"> = </span><span class="hl-0">addSwarm</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">agentList:</span><span class="hl-1"> [</span><span class="hl-6">TRIAGE_AGENT</span><span class="hl-1">, </span><span class="hl-6">SALES_AGENT</span><span class="hl-1">, </span><span class="hl-6">REDUND_AGENT</span><span class="hl-1">],</span><br/><span class="hl-1">  </span><span class="hl-4">defaultAgent:</span><span class="hl-1"> </span><span class="hl-6">TRIAGE_AGENT</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">swarmName:</span><span class="hl-1"> </span><span class="hl-2">&quot;navigation-swarm&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-1">...</span><br/><br/><br/><span class="hl-4">app</span><span class="hl-1">.</span><span class="hl-0">get</span><span class="hl-1">(</span><span class="hl-2">&quot;/api/v1/session/:clientId&quot;</span><span class="hl-1">, </span><span class="hl-0">upgradeWebSocket</span><span class="hl-1">((</span><span class="hl-4">ctx</span><span class="hl-1">) </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">  </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">clientId</span><span class="hl-1"> = </span><span class="hl-4">ctx</span><span class="hl-1">.</span><span class="hl-4">req</span><span class="hl-1">.</span><span class="hl-0">param</span><span class="hl-1">(</span><span class="hl-2">&quot;clientId&quot;</span><span class="hl-1">);</span><br/><br/><span class="hl-1">  </span><span class="hl-5">const</span><span class="hl-1"> { </span><span class="hl-6">complete</span><span class="hl-1">, </span><span class="hl-6">dispose</span><span class="hl-1"> } = </span><span class="hl-0">session</span><span class="hl-1">(</span><span class="hl-4">clientId</span><span class="hl-1">, </span><span class="hl-6">TEST_SWARM</span><span class="hl-1">)</span><br/><br/><span class="hl-1">  </span><span class="hl-3">return</span><span class="hl-1"> {</span><br/><span class="hl-1">    </span><span class="hl-0">onMessage</span><span class="hl-4">:</span><span class="hl-1"> </span><span class="hl-5">async</span><span class="hl-1"> (</span><span class="hl-4">event</span><span class="hl-1">, </span><span class="hl-4">ws</span><span class="hl-1">) </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-5">const</span><span class="hl-1"> </span><span class="hl-6">message</span><span class="hl-1"> = </span><span class="hl-4">event</span><span class="hl-1">.</span><span class="hl-4">data</span><span class="hl-1">.</span><span class="hl-0">toString</span><span class="hl-1">();</span><br/><span class="hl-1">      </span><span class="hl-4">ws</span><span class="hl-1">.</span><span class="hl-0">send</span><span class="hl-1">(</span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">complete</span><span class="hl-1">(</span><span class="hl-4">message</span><span class="hl-1">));</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-0">onClose</span><span class="hl-4">:</span><span class="hl-1"> </span><span class="hl-5">async</span><span class="hl-1"> () </span><span class="hl-5">=&gt;</span><span class="hl-1"> {</span><br/><span class="hl-1">      </span><span class="hl-3">await</span><span class="hl-1"> </span><span class="hl-0">dispose</span><span class="hl-1">();</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">  }</span><br/><span class="hl-1">}));</span><br/>
</code><button type="button">Copy</button></pre>

<p>The feature of this library is dependency inversion for agents injection. The agents are being lazy loaded during runtime, so you can declare them in separate modules and connect them to swarm with a string constant</p>
<pre><code class="tsx"><br/><span class="hl-0">addTool</span><span class="hl-1">({</span><br/><span class="hl-1">    </span><span class="hl-4">toolName:</span><span class="hl-1"> </span><span class="hl-2">&quot;test-tool&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">    ...</span><br/><span class="hl-1">})</span><br/><br/><span class="hl-0">addAgent</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">agentName:</span><span class="hl-1"> </span><span class="hl-2">&quot;test-agent&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">completion:</span><span class="hl-1"> </span><span class="hl-2">&quot;openai-completion&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">prompt:</span><span class="hl-1"> </span><span class="hl-2">&quot;...&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">tools:</span><span class="hl-1"> [</span><span class="hl-2">&quot;test-tool&quot;</span><span class="hl-1">],</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-0">addSwarm</span><span class="hl-1">({</span><br/><span class="hl-1">  </span><span class="hl-4">agentList:</span><span class="hl-1"> [</span><span class="hl-2">&quot;test-agent&quot;</span><span class="hl-1">],</span><br/><span class="hl-1">  </span><span class="hl-4">defaultAgent:</span><span class="hl-1"> </span><span class="hl-2">&quot;test-agent&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">  </span><span class="hl-4">swarmName:</span><span class="hl-1"> </span><span class="hl-2">&quot;test-swarm&quot;</span><span class="hl-1">,</span><br/><span class="hl-1">});</span><br/><br/><span class="hl-5">const</span><span class="hl-1"> { </span><span class="hl-6">complete</span><span class="hl-1">, </span><span class="hl-6">dispose</span><span class="hl-1"> } = </span><span class="hl-0">session</span><span class="hl-1">(</span><span class="hl-4">clientId</span><span class="hl-1">, </span><span class="hl-2">&quot;test-swarm&quot;</span><span class="hl-1">)</span>
</code><button type="button">Copy</button></pre>

<a id="briefing" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Briefing<a href="#briefing" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="assets/icons.svg#icon-anchor"></use></svg></a></h2><p>Agent Swarm Kit lets you build intelligent multi-agent systems where different agents can collaborate, execute tasks, and communicate seamlessly. Think of it like creating a team of specialized AI agents that can work together, share information, validate their actions, and track their interactions - all through a structured TypeScript framework. It's essentially a toolkit for creating complex, coordinated AI workflows where agents can execute commands, commit outputs, and maintain a history of their interactions.</p>
<p><strong>Key Features:</strong></p>
<ul>
<li>Create and manage complex agent networks</li>
<li>Enable agents to execute tasks, communicate, and collaborate</li>
<li>Provide robust validation for tools, agents, and sessions</li>
<li>Track agent interactions and maintain comprehensive history</li>
<li>Support seamless message passing and output tracking</li>
</ul>
<p><strong>Core Components:</strong></p>
<ul>
<li>Agent Management: Create, validate, and connect agents</li>
<li>Session Handling: Execute commands across agent networks</li>
<li>Tool Validation: Ensure agent tools calls meet argument requirements</li>
<li>History Tracking: Log and retrieve agent interactions</li>
</ul>
<p><strong>Use Cases:</strong></p>
<ul>
<li>AI-powered workflow automation</li>
<li>Collaborative problem-solving systems</li>
<li>Complex task distribution across specialized agents</li>
<li>Intelligent system design with modular agent architecture</li>
</ul>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#üêù-agent-swarm-kit"><span>üêù agent-<wbr/>swarm-<wbr/>kit</span></a><ul><li><a href="#installation"><span>Installation</span></a></li><li><a href="#the-idea"><span>The <wbr/>Idea</span></a></li><li><a href="#test-cases"><span>Test <wbr/>Cases</span></a></li><li><ul><li><a href="#validation-test-cases"><span>Validation <wbr/>Test <wbr/>Cases</span></a></li><li><a href="#model-recovery-test-cases"><span>Model <wbr/>Recovery <wbr/>Test <wbr/>Cases</span></a></li><li><a href="#navigation-test-cases"><span>Navigation <wbr/>Test <wbr/>Cases</span></a></li><li><a href="#deadlock-prevention-test-cases"><span>Deadlock <wbr/>Prevention <wbr/>Test <wbr/>Cases</span></a></li><li><a href="#agent-execution-test-cases"><span>Agent <wbr/>Execution <wbr/>Test <wbr/>Cases</span></a></li><li><a href="#connection-disposal-test-cases"><span>Connection <wbr/>Disposal <wbr/>Test <wbr/>Cases</span></a></li><li><a href="#additional-system-behavior-test-cases"><span>Additional <wbr/>System <wbr/>Behavior <wbr/>Test <wbr/>Cases</span></a></li></ul></li><li><a href="#code-sample"><span>Code sample</span></a></li><li><a href="#briefing"><span>Briefing</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="modules.html">agent-swarm-kit - v1.0.159</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>
