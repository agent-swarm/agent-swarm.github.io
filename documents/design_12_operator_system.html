<!DOCTYPE html><html class="default" lang="en" data-base=".."><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>design/12_operator_system | agent-swarm-kit</title><meta name="description" content="Documentation for agent-swarm-kit"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script defer src="../assets/main.js"></script><script async src="../assets/icons.js" id="tsd-icons-script"></script><script async src="../assets/search.js" id="tsd-search-script"></script><script async src="../assets/navigation.js" id="tsd-nav-script"></script><script async src="../assets/hierarchy.js" id="tsd-hierarchy-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search"><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="../index.html" class="title">agent-swarm-kit</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><ul class="tsd-breadcrumb"><li><a href="../modules.html">agent-swarm-kit</a></li><li><a href="design_12_operator_system.html">design/12_operator_system</a></li></ul></div><div class="tsd-panel tsd-typography"><a id="operator-system" class="tsd-anchor"></a><h1 class="tsd-anchor-link">Operator System<a href="#operator-system" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h1><p>The Operator System manages specialized agent types that facilitate communication between agents and external systems or human operators. Unlike standard AI agents that generate responses through completion engines, operators serve as bridges for external input and real-time interaction patterns.</p>
<p>This system enables scenarios where human operators or external systems need to participate directly in agent conversations, providing manual responses or specialized processing that cannot be handled by automated agents. For information about standard AI agents and their completion engines, see <a href="design_02_core_components.html">Client Agent</a>.</p>
<a id="architecture-overview" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Architecture Overview<a href="#architecture-overview" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The Operator System consists of three main components that work together to manage external communication channels:</p>
<p><img src="../media/12_Operator_System_0.svg" alt="Mermaid Diagram"></p>
<a id="core-components" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Core Components<a href="#core-components" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="clientoperator" class="tsd-anchor"></a><h3 class="tsd-anchor-link">ClientOperator<a href="#clientoperator" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The <code>ClientOperator</code> class serves as the primary interface for operator functionality, implementing the <code>IAgent</code> interface with specialized behavior for external communication:</p>
<p><img src="../media/12_Operator_System_1.svg" alt="Mermaid Diagram"></p>
<a id="operatorsignal" class="tsd-anchor"></a><h3 class="tsd-anchor-link">OperatorSignal<a href="#operatorsignal" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The <code>OperatorSignal</code> class manages the communication channel between the operator and external systems:</p>
<table>
<thead>
<tr>
<th>Method</th>
<th>Purpose</th>
<th>Return Type</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>sendMessage()</code></td>
<td>Sends message to external system</td>
<td><code>void</code></td>
</tr>
<tr>
<td><code>dispose()</code></td>
<td>Cleans up signal connection</td>
<td><code>Promise&lt;void&gt;</code></td>
</tr>
</tbody>
</table>
<p>The signal system uses the <code>connectOperator</code> function from <code>IOperatorParams</code> to establish connections and handle message routing.</p>
<a id="operatorinstance" class="tsd-anchor"></a><h3 class="tsd-anchor-link">OperatorInstance<a href="#operatorinstance" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The <code>OperatorInstance</code> class provides the base implementation for operator instances with lifecycle management:</p>
<p><img src="../media/12_Operator_System_2.svg" alt="Mermaid Diagram"></p>
<a id="communication-flow" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Communication Flow<a href="#communication-flow" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The operator system implements a bidirectional communication pattern between agents and external systems:</p>
<p><img src="../media/12_Operator_System_3.svg" alt="Mermaid Diagram"></p>
<a id="timeout-management" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Timeout Management<a href="#timeout-management" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The operator system includes configurable timeout handling to prevent indefinite waiting:</p>
<table>
<thead>
<tr>
<th>Configuration</th>
<th>Default Value</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>OPERATOR_SIGNAL_TIMEOUT</code></td>
<td>90,000ms</td>
<td>Maximum wait time for operator response</td>
</tr>
<tr>
<td><code>CC_ENABLE_OPERATOR_TIMEOUT</code></td>
<td>Global config</td>
<td>Enables/disables timeout functionality</td>
</tr>
<tr>
<td><code>OPERATOR_SIGNAL_SYMBOL</code></td>
<td>Symbol</td>
<td>Timeout indicator in Promise.race</td>
</tr>
</tbody>
</table>
<p>The timeout mechanism uses <code>Promise.race()</code> to compete between the actual response and a timeout delay, ensuring the system remains responsive even when external operators are unavailable.</p>
<a id="operator-utilities" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Operator Utilities<a href="#operator-utilities" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The <code>OperatorUtils</code> class provides factory and management capabilities for operator instances:</p>
<p><img src="../media/12_Operator_System_4.svg" alt="Mermaid Diagram"></p>
<p>The system uses memoization to ensure single operator instances per client-agent combination, managed through the key pattern <code>${clientId}-${agentName}</code>.</p>
<a id="integration-points" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Integration Points<a href="#integration-points" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="agent-interface-compliance" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Agent Interface Compliance<a href="#agent-interface-compliance" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>The <code>ClientOperator</code> implements the <code>IAgent</code> interface but restricts several methods that are not applicable to operator scenarios:</p>
<p><strong>Supported Methods:</strong></p>
<ul>
<li><code>execute()</code> - Processes input and routes to external system</li>
<li><code>waitForOutput()</code> - Waits for external response with timeout</li>
<li><code>commitUserMessage()</code> - Handles user input routing</li>
<li><code>commitAgentChange()</code> - Manages operator lifecycle during agent transitions</li>
<li><code>dispose()</code> - Cleanup and resource management</li>
</ul>
<p><strong>Restricted Methods:</strong></p>
<ul>
<li><code>run()</code> - Not applicable for operator pattern</li>
<li><code>commitToolOutput()</code> - Tools not supported in operator mode</li>
<li><code>commitSystemMessage()</code> - System messages handled externally</li>
<li><code>commitToolRequest()</code> - Tool execution not supported</li>
<li><code>commitAssistantMessage()</code> - Assistant responses come from external system</li>
</ul>
<a id="session-integration" class="tsd-anchor"></a><h3 class="tsd-anchor-link">Session Integration<a href="#session-integration" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><p>Operators integrate with the session management system through the <code>IOperatorParams</code> interface, which includes:</p>
<table>
<thead>
<tr>
<th>Parameter</th>
<th>Type</th>
<th>Purpose</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>agentName</code></td>
<td><code>AgentName</code></td>
<td>Identifies the operator agent</td>
</tr>
<tr>
<td><code>clientId</code></td>
<td><code>string</code></td>
<td>Client session identifier</td>
</tr>
<tr>
<td><code>logger</code></td>
<td><code>ILogger</code></td>
<td>Logging service integration</td>
</tr>
<tr>
<td><code>bus</code></td>
<td><code>IBus</code></td>
<td>Event bus for system communication</td>
</tr>
<tr>
<td><code>history</code></td>
<td><code>IHistory</code></td>
<td>Message history management</td>
</tr>
<tr>
<td><code>connectOperator</code></td>
<td><code>Function</code></td>
<td>Connection factory function</td>
</tr>
</tbody>
</table>
<a id="error-handling-and-logging" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Error Handling and Logging<a href="#error-handling-and-logging" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><p>The operator system includes comprehensive logging and error handling:</p>
<p><strong>Debug Logging:</strong></p>
<ul>
<li>Constructor initialization</li>
<li>Message sending and receiving</li>
<li>Signal disposal</li>
<li>Timeout events</li>
<li>Lifecycle transitions</li>
</ul>
<p><strong>Warning Handling:</strong></p>
<ul>
<li>Unsupported method calls</li>
<li>Timeout occurrences</li>
<li>Disposal of active connections</li>
</ul>
<p>All logging is controlled by the <code>CC_LOGGER_ENABLE_DEBUG</code> global configuration flag and uses the centralized logging service.</p>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#operator-system"><span>Operator <wbr/>System</span></a><ul><li><a href="#architecture-overview"><span>Architecture <wbr/>Overview</span></a></li><li><a href="#core-components"><span>Core <wbr/>Components</span></a></li><li><ul><li><a href="#clientoperator"><span>Client<wbr/>Operator</span></a></li><li><a href="#operatorsignal"><span>Operator<wbr/>Signal</span></a></li><li><a href="#operatorinstance"><span>Operator<wbr/>Instance</span></a></li></ul></li><li><a href="#communication-flow"><span>Communication <wbr/>Flow</span></a></li><li><a href="#timeout-management"><span>Timeout <wbr/>Management</span></a></li><li><a href="#operator-utilities"><span>Operator <wbr/>Utilities</span></a></li><li><a href="#integration-points"><span>Integration <wbr/>Points</span></a></li><li><ul><li><a href="#agent-interface-compliance"><span>Agent <wbr/>Interface <wbr/>Compliance</span></a></li><li><a href="#session-integration"><span>Session <wbr/>Integration</span></a></li></ul></li><li><a href="#error-handling-and-logging"><span>Error <wbr/>Handling and <wbr/>Logging</span></a></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="../modules.html">agent-swarm-kit</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
   (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
   m[i].l=1*new Date();
   for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
   k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
   (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

   ym(100273846, "init", {
        clickmap:true,
        trackLinks:true,
        accurateTrackBounce:true,
        webvisor:true,
        ecommerce:"dataLayer"
   });
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/100273846" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
<!-- /Yandex.Metrika counter -->

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-85RYYZDT35"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-85RYYZDT35');
</script>
