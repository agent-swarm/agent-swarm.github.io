<!DOCTYPE html><html class="default" lang="en" data-base=".."><head><meta charset="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>docs/api-reference/class/ClientAgent | agent-swarm-kit</title><meta name="description" content="Documentation for agent-swarm-kit"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="../assets/style.css"/><link rel="stylesheet" href="../assets/highlight.css"/><script defer src="../assets/main.js"></script><script async src="../assets/icons.js" id="tsd-icons-script"></script><script async src="../assets/search.js" id="tsd-search-script"></script><script async src="../assets/navigation.js" id="tsd-nav-script"></script><script async src="../assets/hierarchy.js" id="tsd-hierarchy-script"></script></head><body><script>document.documentElement.dataset.theme = localStorage.getItem("tsd-theme") || "os";document.body.style.display="none";setTimeout(() => app?app.showPage():document.body.style.removeProperty("display"),500)</script><header class="tsd-page-toolbar"><div class="tsd-toolbar-contents container"><div class="table-cell" id="tsd-search"><div class="field"><label for="tsd-search-field" class="tsd-widget tsd-toolbar-icon search no-caption"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-search"></use></svg></label><input type="text" id="tsd-search-field" aria-label="Search"/></div><div class="field"><div id="tsd-toolbar-links"></div></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="../index.html" class="title">agent-swarm-kit</a></div><div class="table-cell" id="tsd-widgets"><a href="#" class="tsd-widget tsd-toolbar-icon menu no-caption" data-toggle="menu" aria-label="Menu"><svg width="16" height="16" viewBox="0 0 16 16" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-menu"></use></svg></a></div></div></header><div class="container container-main"><div class="col-content"><div class="tsd-page-title"><ul class="tsd-breadcrumb"><li><a href="../modules.html">agent-swarm-kit</a></li><li><a href="docs_api-reference_class_ClientAgent.html">docs/api-reference/class/ClientAgent</a></li></ul></div><div class="tsd-panel tsd-typography"><a id="clientagent" class="tsd-anchor"></a><h1 class="tsd-anchor-link">ClientAgent<a href="#clientagent" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h1><p>Implements <code>IAgent</code></p>
<p>Represents a client-side agent in the swarm system, implementing the IAgent interface.
Manages message execution, tool calls, history updates, and event emissions, with queued execution to prevent overlap.
Integrates with AgentConnectionService (instantiation), HistoryConnectionService (history), ToolSchemaService (tools), CompletionSchemaService (completions), SwarmConnectionService (swarm coordination), and BusService (events).
Uses Subjects from functools-kit for asynchronous state management (e.g., tool errors, agent changes).</p>
<a id="constructor" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Constructor<a href="#constructor" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><pre><code class="ts"><span class="hl-0">constructor</span><span class="hl-1">(</span><span class="hl-2">params</span><span class="hl-1">: </span><span class="hl-2">IAgentParams</span><span class="hl-1">);</span>
</code><button type="button">Copy</button></pre>

<a id="properties" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Properties<a href="#properties" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="params" class="tsd-anchor"></a><h3 class="tsd-anchor-link">params<a href="#params" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="ts"><span class="hl-11">params</span><span class="hl-1">: </span><span class="hl-2">IAgentParams</span>
</code><button type="button">Copy</button></pre>

<a id="_toolabortcontroller" class="tsd-anchor"></a><h3 class="tsd-anchor-link">_toolAbortController<a href="#_toolabortcontroller" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="ts"><span class="hl-11">_toolAbortController</span><span class="hl-1">: </span><span class="hl-2">ToolAbortController</span>
</code><button type="button">Copy</button></pre>

<p>An instance of <code>ToolAbortController</code> used to manage the lifecycle of abort signals for tool executions.
Provides an <code>AbortSignal</code> to signal and handle abort events for asynchronous operations.</p>
<p>This property is used to control and cancel ongoing tool executions when necessary, such as during agent changes or tool stops.</p>
<a id="_agentchangesubject" class="tsd-anchor"></a><h3 class="tsd-anchor-link">_agentChangeSubject<a href="#_agentchangesubject" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="ts"><span class="hl-11">_agentChangeSubject</span><span class="hl-1">: </span><span class="hl-2">Subject</span><span class="hl-1">&lt;</span><span class="hl-2">unique</span><span class="hl-1"> </span><span class="hl-2">symbol</span><span class="hl-1">&gt;</span>
</code><button type="button">Copy</button></pre>

<p>Subject for signaling agent changes, halting subsequent tool executions via commitAgentChange.</p>
<a id="_resquesubject" class="tsd-anchor"></a><h3 class="tsd-anchor-link">_resqueSubject<a href="#_resquesubject" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="ts"><span class="hl-11">_resqueSubject</span><span class="hl-1">: </span><span class="hl-2">Subject</span><span class="hl-1">&lt;</span><span class="hl-2">unique</span><span class="hl-1"> </span><span class="hl-2">symbol</span><span class="hl-1">&gt;</span>
</code><button type="button">Copy</button></pre>

<p>Subject for signaling model resurrection events, triggered by _resurrectModel during error recovery.</p>
<a id="_toolerrorsubject" class="tsd-anchor"></a><h3 class="tsd-anchor-link">_toolErrorSubject<a href="#_toolerrorsubject" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="ts"><span class="hl-11">_toolErrorSubject</span><span class="hl-1">: </span><span class="hl-2">Subject</span><span class="hl-1">&lt;</span><span class="hl-2">unique</span><span class="hl-1"> </span><span class="hl-2">symbol</span><span class="hl-1">&gt;</span>
</code><button type="button">Copy</button></pre>

<p>Subject for signaling tool execution errors, emitted by createToolCall on failure.</p>
<a id="_toolstopsubject" class="tsd-anchor"></a><h3 class="tsd-anchor-link">_toolStopSubject<a href="#_toolstopsubject" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="ts"><span class="hl-11">_toolStopSubject</span><span class="hl-1">: </span><span class="hl-2">Subject</span><span class="hl-1">&lt;</span><span class="hl-2">unique</span><span class="hl-1"> </span><span class="hl-2">symbol</span><span class="hl-1">&gt;</span>
</code><button type="button">Copy</button></pre>

<p>Subject for signaling tool execution stops, triggered by commitStopTools.</p>
<a id="_canceloutputsubject" class="tsd-anchor"></a><h3 class="tsd-anchor-link">_cancelOutputSubject<a href="#_canceloutputsubject" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="ts"><span class="hl-11">_cancelOutputSubject</span><span class="hl-1">: </span><span class="hl-2">Subject</span><span class="hl-1">&lt;</span><span class="hl-2">unique</span><span class="hl-1"> </span><span class="hl-2">symbol</span><span class="hl-1">&gt;</span>
</code><button type="button">Copy</button></pre>

<p>Subject for signaling tool execution stops, triggered by commitCancelOutput.</p>
<a id="_toolcommitsubject" class="tsd-anchor"></a><h3 class="tsd-anchor-link">_toolCommitSubject<a href="#_toolcommitsubject" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="ts"><span class="hl-11">_toolCommitSubject</span><span class="hl-1">: </span><span class="hl-2">Subject</span><span class="hl-1">&lt;</span><span class="hl-4">void</span><span class="hl-1">&gt;</span>
</code><button type="button">Copy</button></pre>

<p>Subject for signaling tool output commitments, triggered by commitToolOutput.</p>
<a id="_outputsubject" class="tsd-anchor"></a><h3 class="tsd-anchor-link">_outputSubject<a href="#_outputsubject" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="ts"><span class="hl-11">_outputSubject</span><span class="hl-1">: </span><span class="hl-2">Subject</span><span class="hl-1">&lt;</span><span class="hl-2">string</span><span class="hl-1">&gt;</span>
</code><button type="button">Copy</button></pre>

<p>Subject for emitting transformed outputs, used by _emitOutput and waitForOutput.</p>
<a id="execute" class="tsd-anchor"></a><h3 class="tsd-anchor-link">execute<a href="#execute" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="ts"><span class="hl-11">execute</span><span class="hl-1">: (</span><span class="hl-2">input</span><span class="hl-1">: </span><span class="hl-7">string</span><span class="hl-1">, </span><span class="hl-2">mode</span><span class="hl-1">: </span><span class="hl-7">ExecutionMode</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-7">Promise</span><span class="hl-1">&lt;</span><span class="hl-4">void</span><span class="hl-1">&gt;</span>
</code><button type="button">Copy</button></pre>

<p>Executes the incoming message and processes tool calls if present, queued to prevent overlapping executions.
Implements IAgent.execute, delegating to EXECUTE_FN with queuing via functools-kit’s queued decorator.</p>
<a id="run" class="tsd-anchor"></a><h3 class="tsd-anchor-link">run<a href="#run" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="ts"><span class="hl-11">run</span><span class="hl-1">: (</span><span class="hl-2">input</span><span class="hl-1">: </span><span class="hl-7">string</span><span class="hl-1">) </span><span class="hl-4">=&gt;</span><span class="hl-1"> </span><span class="hl-7">Promise</span><span class="hl-1">&lt;</span><span class="hl-2">string</span><span class="hl-1">&gt;</span>
</code><button type="button">Copy</button></pre>

<p>Runs a stateless completion for the incoming message, queued to prevent overlapping executions.
Implements IAgent.run, delegating to RUN_FN with queuing via functools-kit’s queued decorator.</p>
<a id="methods" class="tsd-anchor"></a><h2 class="tsd-anchor-link">Methods<a href="#methods" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h2><a id="_resolvetools" class="tsd-anchor"></a><h3 class="tsd-anchor-link">_resolveTools<a href="#_resolvetools" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="ts"><span class="hl-0">_resolveTools</span><span class="hl-1">(): </span><span class="hl-7">Promise</span><span class="hl-1">&lt;</span><span class="hl-2">IAgentTool</span><span class="hl-1">[]&gt;;</span>
</code><button type="button">Copy</button></pre>

<p>Resolves and combines tools from the agent's parameters and MCP tool list, ensuring no duplicate tool names.
Ensures only one commit action tool is present in the list.</p>
<a id="_resolvesystemprompt" class="tsd-anchor"></a><h3 class="tsd-anchor-link">_resolveSystemPrompt<a href="#_resolvesystemprompt" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="ts"><span class="hl-0">_resolveSystemPrompt</span><span class="hl-1">(): </span><span class="hl-7">Promise</span><span class="hl-1">&lt;</span><span class="hl-2">string</span><span class="hl-1">[]&gt;;</span>
</code><button type="button">Copy</button></pre>

<p>Resolves the system prompt by combining static and dynamic system messages.
Static messages are directly included from the <code>systemStatic</code> parameter, while dynamic messages
are fetched asynchronously using the <code>systemDynamic</code> function.</p>
<p>This method is used to construct the system-level context for the agent, which can include
predefined static messages and dynamically generated messages based on the agent's state or configuration.</p>
<p>including both static and dynamically generated messages.</p>
<a id="_emitoutput" class="tsd-anchor"></a><h3 class="tsd-anchor-link">_emitOutput<a href="#_emitoutput" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="ts"><span class="hl-0">_emitOutput</span><span class="hl-1">(</span><span class="hl-2">mode</span><span class="hl-1">: </span><span class="hl-2">ExecutionMode</span><span class="hl-1">, </span><span class="hl-2">rawResult</span><span class="hl-1">: </span><span class="hl-2">string</span><span class="hl-1">): </span><span class="hl-7">Promise</span><span class="hl-1">&lt;</span><span class="hl-4">void</span><span class="hl-1">&gt;;</span>
</code><button type="button">Copy</button></pre>

<p>Emits the transformed output after validation, invoking callbacks and emitting events via BusService.
Attempts model resurrection via _resurrectModel if validation fails, throwing an error if unrecoverable.
Supports SwarmConnectionService by broadcasting agent outputs within the swarm.</p>
<a id="_resurrectmodel" class="tsd-anchor"></a><h3 class="tsd-anchor-link">_resurrectModel<a href="#_resurrectmodel" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="ts"><span class="hl-0">_resurrectModel</span><span class="hl-1">(</span><span class="hl-2">mode</span><span class="hl-1">: </span><span class="hl-2">ExecutionMode</span><span class="hl-1">, </span><span class="hl-2">reason</span><span class="hl-1">?: </span><span class="hl-2">string</span><span class="hl-1">): </span><span class="hl-7">Promise</span><span class="hl-1">&lt;</span><span class="hl-2">string</span><span class="hl-1">&gt;;</span>
</code><button type="button">Copy</button></pre>

<p>Resurrects the model in case of failures using configured strategies (flush, recomplete, custom).
Updates history with failure details and returns a placeholder or transformed result, signaling via _resqueSubject.
Supports error recovery for CompletionSchemaService’s getCompletion calls.</p>
<a id="waitforoutput" class="tsd-anchor"></a><h3 class="tsd-anchor-link">waitForOutput<a href="#waitforoutput" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="ts"><span class="hl-0">waitForOutput</span><span class="hl-1">(): </span><span class="hl-7">Promise</span><span class="hl-1">&lt;</span><span class="hl-2">string</span><span class="hl-1">&gt;;</span>
</code><button type="button">Copy</button></pre>

<p>Waits for the next output to be emitted via _outputSubject, typically after execute or run.
Useful for external consumers (e.g., SwarmConnectionService) awaiting agent responses.</p>
<a id="getcompletion" class="tsd-anchor"></a><h3 class="tsd-anchor-link">getCompletion<a href="#getcompletion" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="ts"><span class="hl-0">getCompletion</span><span class="hl-1">(</span><span class="hl-2">mode</span><span class="hl-1">: </span><span class="hl-2">ExecutionMode</span><span class="hl-1">, </span><span class="hl-2">tools</span><span class="hl-1">: </span><span class="hl-2">IAgentTool</span><span class="hl-1">[]): </span><span class="hl-7">Promise</span><span class="hl-1">&lt;</span><span class="hl-2">ISwarmMessage</span><span class="hl-1">&gt;;</span>
</code><button type="button">Copy</button></pre>

<p>Retrieves a completion message from the model using the current history and tools.
Applies validation and resurrection strategies (via _resurrectModel) if needed, integrating with CompletionSchemaService.</p>
<a id="commitusermessage" class="tsd-anchor"></a><h3 class="tsd-anchor-link">commitUserMessage<a href="#commitusermessage" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="ts"><span class="hl-0">commitUserMessage</span><span class="hl-1">(</span><span class="hl-2">message</span><span class="hl-1">: </span><span class="hl-2">string</span><span class="hl-1">, </span><span class="hl-2">mode</span><span class="hl-1">: </span><span class="hl-2">ExecutionMode</span><span class="hl-1">): </span><span class="hl-7">Promise</span><span class="hl-1">&lt;</span><span class="hl-4">void</span><span class="hl-1">&gt;;</span>
</code><button type="button">Copy</button></pre>

<p>Commits a user message to the history without triggering a response, notifying the system via BusService.
Supports SessionConnectionService by logging user interactions within a session.</p>
<a id="commitflush" class="tsd-anchor"></a><h3 class="tsd-anchor-link">commitFlush<a href="#commitflush" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="ts"><span class="hl-0">commitFlush</span><span class="hl-1">(): </span><span class="hl-7">Promise</span><span class="hl-1">&lt;</span><span class="hl-4">void</span><span class="hl-1">&gt;;</span>
</code><button type="button">Copy</button></pre>

<p>Commits a flush of the agent’s history, clearing it and notifying the system via BusService.
Useful for resetting agent state, coordinated with HistoryConnectionService.</p>
<a id="commitagentchange" class="tsd-anchor"></a><h3 class="tsd-anchor-link">commitAgentChange<a href="#commitagentchange" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="ts"><span class="hl-0">commitAgentChange</span><span class="hl-1">(): </span><span class="hl-7">Promise</span><span class="hl-1">&lt;</span><span class="hl-4">void</span><span class="hl-1">&gt;;</span>
</code><button type="button">Copy</button></pre>

<p>Signals an agent change to halt subsequent tool executions, emitting an event via _agentChangeSubject and BusService.
Supports SwarmConnectionService by allowing dynamic agent switching within a swarm.</p>
<a id="commitstoptools" class="tsd-anchor"></a><h3 class="tsd-anchor-link">commitStopTools<a href="#commitstoptools" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="ts"><span class="hl-0">commitStopTools</span><span class="hl-1">(): </span><span class="hl-7">Promise</span><span class="hl-1">&lt;</span><span class="hl-4">void</span><span class="hl-1">&gt;;</span>
</code><button type="button">Copy</button></pre>

<p>Signals a stop to prevent further tool executions, emitting an event via _toolStopSubject and BusService.
Used to interrupt tool call chains, coordinated with ToolSchemaService tools.</p>
<a id="commitcanceloutput" class="tsd-anchor"></a><h3 class="tsd-anchor-link">commitCancelOutput<a href="#commitcanceloutput" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="ts"><span class="hl-0">commitCancelOutput</span><span class="hl-1">(): </span><span class="hl-7">Promise</span><span class="hl-1">&lt;</span><span class="hl-4">void</span><span class="hl-1">&gt;;</span>
</code><button type="button">Copy</button></pre>

<p>Signals a stop to prevent further tool executions, emitting an event via _cancelOutputSubject and BusService.</p>
<a id="commitsystemmessage" class="tsd-anchor"></a><h3 class="tsd-anchor-link">commitSystemMessage<a href="#commitsystemmessage" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="ts"><span class="hl-0">commitSystemMessage</span><span class="hl-1">(</span><span class="hl-2">message</span><span class="hl-1">: </span><span class="hl-2">string</span><span class="hl-1">): </span><span class="hl-7">Promise</span><span class="hl-1">&lt;</span><span class="hl-4">void</span><span class="hl-1">&gt;;</span>
</code><button type="button">Copy</button></pre>

<p>Commits a system message to the history, notifying the system via BusService without triggering execution.
Supports system-level updates, coordinated with SessionConnectionService.</p>
<a id="commitdevelopermessage" class="tsd-anchor"></a><h3 class="tsd-anchor-link">commitDeveloperMessage<a href="#commitdevelopermessage" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="ts"><span class="hl-0">commitDeveloperMessage</span><span class="hl-1">(</span><span class="hl-2">message</span><span class="hl-1">: </span><span class="hl-2">string</span><span class="hl-1">): </span><span class="hl-7">Promise</span><span class="hl-1">&lt;</span><span class="hl-4">void</span><span class="hl-1">&gt;;</span>
</code><button type="button">Copy</button></pre>

<p>Commits a developer message to the history, notifying the system via BusService without triggering execution.
Useful for logging developer notes or debugging information, coordinated with SessionConnectionService.</p>
<a id="committoolrequest" class="tsd-anchor"></a><h3 class="tsd-anchor-link">commitToolRequest<a href="#committoolrequest" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="ts"><span class="hl-0">commitToolRequest</span><span class="hl-1">(</span><span class="hl-2">request</span><span class="hl-1">: </span><span class="hl-2">IToolRequest</span><span class="hl-1">[]): </span><span class="hl-7">Promise</span><span class="hl-1">&lt;</span><span class="hl-2">string</span><span class="hl-1">[]&gt;;</span>
</code><button type="button">Copy</button></pre>

<p>Commits a tool request to the agent's history and emits an event via BusService.
This method is used to log tool requests and notify the system of the requested tool calls.
The tool requests are transformed into tool call objects using the <code>createToolRequest</code> utility.</p>
<a id="commitassistantmessage" class="tsd-anchor"></a><h3 class="tsd-anchor-link">commitAssistantMessage<a href="#commitassistantmessage" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="ts"><span class="hl-0">commitAssistantMessage</span><span class="hl-1">(</span><span class="hl-2">message</span><span class="hl-1">: </span><span class="hl-2">string</span><span class="hl-1">): </span><span class="hl-7">Promise</span><span class="hl-1">&lt;</span><span class="hl-4">void</span><span class="hl-1">&gt;;</span>
</code><button type="button">Copy</button></pre>

<p>Commits an assistant message to the history without triggering execution, notifying the system via BusService.
Useful for logging assistant responses, coordinated with HistoryConnectionService.</p>
<a id="committooloutput" class="tsd-anchor"></a><h3 class="tsd-anchor-link">commitToolOutput<a href="#committooloutput" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="ts"><span class="hl-0">commitToolOutput</span><span class="hl-1">(</span><span class="hl-2">toolId</span><span class="hl-1">: </span><span class="hl-2">string</span><span class="hl-1">, </span><span class="hl-2">content</span><span class="hl-1">: </span><span class="hl-2">string</span><span class="hl-1">): </span><span class="hl-7">Promise</span><span class="hl-1">&lt;</span><span class="hl-4">void</span><span class="hl-1">&gt;;</span>
</code><button type="button">Copy</button></pre>

<p>Commits tool output to the history, signaling completion via _toolCommitSubject and notifying the system via BusService.
Integrates with ToolSchemaService by linking tool output to tool calls.</p>
<a id="dispose" class="tsd-anchor"></a><h3 class="tsd-anchor-link">dispose<a href="#dispose" aria-label="Permalink" class="tsd-anchor-icon"><svg viewBox="0 0 24 24" aria-hidden="true"><use href="../assets/icons.svg#icon-anchor"></use></svg></a></h3><pre><code class="ts"><span class="hl-0">dispose</span><span class="hl-1">(): </span><span class="hl-7">Promise</span><span class="hl-1">&lt;</span><span class="hl-4">void</span><span class="hl-1">&gt;;</span>
</code><button type="button">Copy</button></pre>

<p>Disposes of the agent, performing cleanup and invoking the onDispose callback.
Logs the disposal if debugging is enabled, supporting AgentConnectionService cleanup.</p>
</div></div><div class="col-sidebar"><div class="page-menu"><div class="tsd-navigation settings"><details class="tsd-accordion"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>Settings</h3></summary><div class="tsd-accordion-details"><div class="tsd-filter-visibility"><span class="settings-label">Member Visibility</span><ul id="tsd-filter-options"><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-protected" name="protected"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Protected</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-inherited" name="inherited" checked/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>Inherited</span></label></li><li class="tsd-filter-item"><label class="tsd-filter-input"><input type="checkbox" id="tsd-filter-external" name="external"/><svg width="32" height="32" viewBox="0 0 32 32" aria-hidden="true"><rect class="tsd-checkbox-background" width="30" height="30" x="1" y="1" rx="6" fill="none"></rect><path class="tsd-checkbox-checkmark" d="M8.35422 16.8214L13.2143 21.75L24.6458 10.25" stroke="none" stroke-width="3.5" stroke-linejoin="round" fill="none"></path></svg><span>External</span></label></li></ul></div><div class="tsd-theme-toggle"><label class="settings-label" for="tsd-theme">Theme</label><select id="tsd-theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></div></div></details></div><details open class="tsd-accordion tsd-page-navigation"><summary class="tsd-accordion-summary"><h3><svg width="20" height="20" viewBox="0 0 24 24" fill="none" aria-hidden="true"><use href="../assets/icons.svg#icon-chevronDown"></use></svg>On This Page</h3></summary><div class="tsd-accordion-details"><a href="#clientagent"><span>Client<wbr/>Agent</span></a><ul><li><a href="#constructor"><span>Constructor</span></a></li><li><a href="#properties"><span>Properties</span></a></li><li><ul><li><a href="#params"><span>params</span></a></li><li><a href="#_toolabortcontroller"><span>_tool<wbr/>Abort<wbr/>Controller</span></a></li><li><a href="#_agentchangesubject"><span>_agent<wbr/>Change<wbr/>Subject</span></a></li><li><a href="#_resquesubject"><span>_resque<wbr/>Subject</span></a></li><li><a href="#_toolerrorsubject"><span>_tool<wbr/>Error<wbr/>Subject</span></a></li><li><a href="#_toolstopsubject"><span>_tool<wbr/>Stop<wbr/>Subject</span></a></li><li><a href="#_canceloutputsubject"><span>_cancel<wbr/>Output<wbr/>Subject</span></a></li><li><a href="#_toolcommitsubject"><span>_tool<wbr/>Commit<wbr/>Subject</span></a></li><li><a href="#_outputsubject"><span>_output<wbr/>Subject</span></a></li><li><a href="#execute"><span>execute</span></a></li><li><a href="#run"><span>run</span></a></li></ul></li><li><a href="#methods"><span>Methods</span></a></li><li><ul><li><a href="#_resolvetools"><span>_resolve<wbr/>Tools</span></a></li><li><a href="#_resolvesystemprompt"><span>_resolve<wbr/>System<wbr/>Prompt</span></a></li><li><a href="#_emitoutput"><span>_emit<wbr/>Output</span></a></li><li><a href="#_resurrectmodel"><span>_resurrect<wbr/>Model</span></a></li><li><a href="#waitforoutput"><span>wait<wbr/>For<wbr/>Output</span></a></li><li><a href="#getcompletion"><span>get<wbr/>Completion</span></a></li><li><a href="#commitusermessage"><span>commit<wbr/>User<wbr/>Message</span></a></li><li><a href="#commitflush"><span>commit<wbr/>Flush</span></a></li><li><a href="#commitagentchange"><span>commit<wbr/>Agent<wbr/>Change</span></a></li><li><a href="#commitstoptools"><span>commit<wbr/>Stop<wbr/>Tools</span></a></li><li><a href="#commitcanceloutput"><span>commit<wbr/>Cancel<wbr/>Output</span></a></li><li><a href="#commitsystemmessage"><span>commit<wbr/>System<wbr/>Message</span></a></li><li><a href="#commitdevelopermessage"><span>commit<wbr/>Developer<wbr/>Message</span></a></li><li><a href="#committoolrequest"><span>commit<wbr/>Tool<wbr/>Request</span></a></li><li><a href="#commitassistantmessage"><span>commit<wbr/>Assistant<wbr/>Message</span></a></li><li><a href="#committooloutput"><span>commit<wbr/>Tool<wbr/>Output</span></a></li><li><a href="#dispose"><span>dispose</span></a></li></ul></li></ul></div></details></div><div class="site-menu"><nav class="tsd-navigation"><a href="../modules.html">agent-swarm-kit</a><ul class="tsd-small-nested-navigation" id="tsd-nav-container"><li>Loading...</li></ul></nav></div></div></div><footer><p class="tsd-generator">Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></footer><div class="overlay"></div></body></html>

<!-- Yandex.Metrika counter -->
<script type="text/javascript" >
   (function(m,e,t,r,i,k,a){m[i]=m[i]||function(){(m[i].a=m[i].a||[]).push(arguments)};
   m[i].l=1*new Date();
   for (var j = 0; j < document.scripts.length; j++) {if (document.scripts[j].src === r) { return; }}
   k=e.createElement(t),a=e.getElementsByTagName(t)[0],k.async=1,k.src=r,a.parentNode.insertBefore(k,a)})
   (window, document, "script", "https://mc.yandex.ru/metrika/tag.js", "ym");

   ym(100273846, "init", {
        clickmap:true,
        trackLinks:true,
        accurateTrackBounce:true,
        webvisor:true,
        ecommerce:"dataLayer"
   });
</script>
<noscript><div><img src="https://mc.yandex.ru/watch/100273846" style="position:absolute; left:-9999px;" alt="" /></div></noscript>
<!-- /Yandex.Metrika counter -->

<!-- Google tag (gtag.js) -->
<script async src="https://www.googletagmanager.com/gtag/js?id=G-85RYYZDT35"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'G-85RYYZDT35');
</script>
